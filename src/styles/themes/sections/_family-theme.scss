@use '../../global/mixins' as *;
@use '../../tokens' as tokens;
@use '../../tokens/primitives' as primitives;

// ==========================================================================
// FAMILY SECTION THEMES
// ==========================================================================

// --- JEWELRY BOX (XV / Wedding) ---
.family[data-variant='jewelry-box'] {
	background: linear-gradient(180deg, #fff9f5 0%, #fff0f5 100%);

	&::before {
		background: linear-gradient(
			90deg,
			transparent,
			var(--color-action-accent, tokens.$color-action-accent),
			transparent
		);
	}

	.family__suptitle {
		font-family: tokens.$font-display-elegant;
		color: var(--color-action-accent, tokens.$color-action-accent);
	}

	.family__title-main {
		font-family: tokens.$font-display-formal;
		background: linear-gradient(
			to right,
			#111 0%,
			var(--color-action-accent, tokens.$color-action-accent) 50%,
			#111 100%
		);
		background-clip: text;
		-webkit-background-clip: text;
		-webkit-text-fill-color: transparent;
	}

	.family__card-inner {
		background: tokens.$color-glass-bg;
		border: 1px solid tokens.$color-glass-border;
		box-shadow: tokens.$shadow-subtle;

		&::after {
			background: linear-gradient(
				90deg,
				transparent,
				var(--color-action-accent, tokens.$color-action-accent),
				transparent
			);
		}
	}

	.family__card-subtitle {
		font-family: tokens.$font-display-elegant;
		color: var(--color-action-accent, tokens.$color-action-accent);
	}

	.family__calligraphy-ampersand {
		font-family: var(--font-calligraphy, 'Pinyon Script'), cursive;
		font-size: 2.5rem;
		color: var(--color-action-accent, tokens.$color-action-accent);
		line-height: 1;
	}

	.family__name {
		font-family: 'Playfair Display', serif;
		color: #111;

		&::first-letter {
			color: var(--color-action-accent, tokens.$color-action-accent);
		}
	}

	.family__role {
		font-family: tokens.$font-display-formal;
		color: var(--color-action-accent, tokens.$color-action-accent);
	}

	.family__image-frame {
		border: 1px solid rgba(var(--color-action-accent-rgb), 0.4);
		box-shadow: 0 15px 45px rgba(var(--color-action-accent-rgb), 0.3);
	}
}

// --- LUXURY HACIENDA PREMIUM (Gerardo / Masculine Elite) ---
.family[data-variant='luxury-hacienda'] {
	// Textura de cuero premium con fondo oscuro
	@include leather-texture;
	background-color: rgba(30, 20, 15, 0.98);
	background-blend-mode: overlay;
	padding: 12rem 2rem;
	position: relative;
	box-shadow: inset 0 0 100px rgba(0, 0, 0, 0.8);
	overflow: hidden;

	// Marco de costura alrededor de toda la sección (Leather Stitching)
	&::after {
		content: '';
		position: absolute;
		inset: 2rem;
		border: 1px dashed rgba(var(--color-action-accent-rgb, 212, 175, 55), 0.2);
		border-radius: 4px;
		pointer-events: none;
		opacity: 0.5;
		z-index: 1;
	}

	// Remaches estructurales en las esquinas de la sección
	.family-rivet {
		position: absolute;
		width: 8px;
		height: 8px;
		background: radial-gradient(
			circle at 30% 30%,
			#fff 0%,
			var(--color-action-accent, #d4af37) 70%,
			#000 100%
		);
		border-radius: 50%;
		box-shadow: 0 2px 4px rgba(0, 0, 0, 0.8);
		z-index: 10;

		&--tl {
			top: 2rem;
			left: 2rem;
		}
		&--tr {
			top: 2rem;
			right: 2rem;
		}
		&--bl {
			bottom: 2rem;
			left: 2rem;
		}
		&--br {
			bottom: 2rem;
			right: 2rem;
		}
	}

	// Textura de papel pergamino superpuesta
	.family-parchment-overlay {
		position: absolute;
		inset: 0;
		@include paper-texture;
		opacity: 0.15;
		pointer-events: none;
		z-index: 0;
	}

	// ==========================================================================
	// HEADER PREMIUM
	// ==========================================================================

	.family__header {
		position: relative;
		z-index: 5;
	}

	.family__suptitle {
		font-family: tokens.$font-display-hacienda;
		color: var(--color-action-accent, primitives.$base-gold-500);
		text-transform: uppercase;
		letter-spacing: 0.2em;
		font-size: 1.1rem;
		text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
		display: block;
		margin-bottom: 1.5rem;
		opacity: 0.9;

		// Efecto grabado sutil
		@include engraved-text;
	}

	.family__title-main {
		font-family: tokens.$font-display-hacienda;
		font-size: clamp(2.5rem, 6vw, 4rem);
		color: transparent;
		text-transform: uppercase;
		letter-spacing: 0.12em;
		font-weight: 500;
		line-height: 1.1;

		// Gradiente dorado premium con animación
		background: linear-gradient(
			to right,
			primitives.$base-gold-300,
			primitives.$base-gold-500,
			color-mix(in srgb, primitives.$base-gold-500, white 30%),
			primitives.$base-gold-500,
			primitives.$base-gold-300
		);
		background-clip: text;
		-webkit-background-clip: text;
		background-size: 200% auto;
		animation: goldShimmer 4s ease-in-out infinite;

		margin: 0;
		text-shadow:
			0 4px 8px rgba(0, 0, 0, 0.3),
			0 0 20px rgba(var(--color-action-accent-rgb, 212, 175, 55), 0.2);

		// Efecto de relieve
		position: relative;

		&::after {
			content: attr(data-text);
			position: absolute;
			top: 1px;
			left: 1px;
			background: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.4));
			-webkit-background-clip: text;
			background-clip: text;
			color: transparent;
			z-index: -1;
		}
	}

	// ==========================================================================
	// LAYOUT PREMIUM
	// ==========================================================================

	.family__layout {
		position: relative;
		z-index: 5;
	}

	// ==========================================================================
	// TARJETAS PREMIUM CON PROFUNDIDAD Y RELIEVE
	// ==========================================================================

	.family__card-inner {
		// Textura de papel pergamino premium
		@include paper-texture;
		background-color: rgba(20, 15, 10, 0.9);
		background-blend-mode: overlay;

		// Bordes con múltiples capas para relieve
		border: 2px solid rgba(var(--color-action-accent-rgb, 212, 175, 55), 0.3);
		box-shadow:
			0 10px 30px rgba(0, 0, 0, 0.6),
			inset 0 1px 0 rgba(255, 255, 255, 0.1),
			0 0 0 1px rgba(0, 0, 0, 0.3),
			// Borde interior para profundidad
			inset 0 0 20px rgba(0, 0, 0, 0.4);

		backdrop-filter: blur(8px) saturate(180%);
		padding: 3rem 2.5rem;
		border-radius: 4px;
		position: relative;
		overflow: hidden;
		transition: all 0.5s cubic-bezier(0.16, 1, 0.3, 1);

		// Remaches en esquinas de tarjetas
		&::before {
			content: '';
			position: absolute;
			width: 6px;
			height: 6px;
			background: radial-gradient(
				circle at 30% 30%,
				#fff 0%,
				primitives.$base-coffee-700 70%,
				#000 100%
			);
			border-radius: 50%;
			box-shadow: 0 1px 2px rgba(0, 0, 0, 0.8);
			z-index: 2;
		}

		// Borde superior acentuado
		&::after {
			content: '';
			position: absolute;
			top: 0;
			left: 0;
			right: 0;
			height: 3px;
			background: linear-gradient(
				90deg,
				transparent,
				rgba(var(--color-action-accent-rgb, 212, 175, 55), 0.6),
				transparent
			);
			opacity: 0.4;
		}

		// Efecto de elevación premium al hover
		&:hover {
			transform: translateY(-6px);
			box-shadow:
				0 20px 40px rgba(0, 0, 0, 0.8),
				0 0 30px rgba(var(--color-action-accent-rgb, 212, 175, 55), 0.3),
				inset 0 0 30px rgba(0, 0, 0, 0.8),
				0 0 0 1px rgba(0, 0, 0, 0.4);
			border-color: rgba(var(--color-action-accent-rgb, 212, 175, 55), 0.5);

			&::after {
				opacity: 0.8;
				height: 4px;
			}
		}

		// Posicionamiento de remaches por tipo de tarjeta
		.family__card--spouse &::before {
			top: 1.5rem;
			right: 1.5rem;
		}

		.family__card--children &::before {
			bottom: 1.5rem;
			left: 1.5rem;
		}

		.family__card--parents &::before {
			bottom: 1.5rem;
			right: 1.5rem;
		}
	}

	// ==========================================================================
	// TIPOGRAFÍA PREMIUM
	// ==========================================================================

	.family__card-subtitle {
		font-family: tokens.$font-display-hacienda;
		color: var(--color-action-accent, primitives.$base-gold-500);
		letter-spacing: 0.2em;
		font-size: 1rem;
		text-transform: uppercase;
		margin: 0 0 2rem 0;
		text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);

		// Efecto grabado premium
		@include engraved-text;
	}

	.family__name {
		font-family: tokens.$font-display-hacienda;
		font-size: 1.9rem;
		font-weight: 400;
		color: rgba(primitives.$base-parchment-100, 0.95);
		line-height: 1.1;
		letter-spacing: 0.05em;
		margin: 0;
		transition: all 0.3s ease;

		// Efecto de relieve para nombres
		text-shadow:
			0 1px 0 rgba(255, 255, 255, 0.2),
			0 2px 4px rgba(0, 0, 0, 0.4);

		&::first-letter {
			font-family: tokens.$font-display-hacienda;
			font-size: 120%;
			color: var(--color-action-accent, primitives.$base-gold-500);
			text-shadow:
				0 1px 0 rgba(255, 255, 255, 0.3),
				0 2px 6px rgba(var(--color-action-accent-rgb, 212, 175, 55), 0.4);
		}

		&--child {
			font-size: 1.7rem;
			font-weight: 300;
			color: rgba(primitives.$base-parchment-100, 0.85);
		}
	}

	.family__role {
		display: block;
		font-family: tokens.$font-ui;
		font-size: 0.95rem;
		text-transform: uppercase;
		letter-spacing: 0.2em;
		color: rgba(primitives.$base-parchment-100, 0.7);
		margin-top: 0.5rem;
		font-weight: 500;
		transition: all 0.3s ease;

		&--accent {
			color: var(--color-action-accent, primitives.$base-gold-500);
			font-size: 1.1rem;
			letter-spacing: 0.25em;
			text-shadow: 0 2px 4px rgba(var(--color-action-accent-rgb, 212, 175, 55), 0.3);
		}

		&--child {
			font-size: 0.85rem;
			letter-spacing: 0.15em;
			color: rgba(primitives.$base-parchment-100, 0.6);
		}
	}

	// ==========================================================================
	// ELEMENTOS DE LISTA PREMIUM
	// ==========================================================================

	.family__child-number {
		width: 36px;
		height: 36px;
		display: flex;
		align-items: center;
		justify-content: center;
		background: linear-gradient(
			135deg,
			rgba(var(--color-action-accent-rgb, 212, 175, 55), 0.15),
			rgba(var(--color-action-accent-rgb, 212, 175, 55), 0.05)
		);
		border: 1px solid rgba(var(--color-action-accent-rgb, 212, 175, 55), 0.3);
		border-radius: 4px;
		font-family: tokens.$font-ui;
		font-size: 0.9rem;
		color: var(--color-action-accent, primitives.$base-gold-500);
		font-weight: 600;
		flex-shrink: 0;
		box-shadow:
			0 4px 12px rgba(0, 0, 0, 0.3),
			inset 0 1px 0 rgba(255, 255, 255, 0.1);
		position: relative;

		// Efecto de relieve en números
		&::after {
			content: '';
			position: absolute;
			inset: 0;
			border-radius: 3px;
			box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.4);
			pointer-events: none;
		}
	}

	.family__calligraphy-ampersand {
		font-family: tokens.$font-calligraphy;
		font-size: 2.5rem;
		color: rgba(var(--color-action-accent-rgb, 212, 175, 55), 0.6);
		font-style: italic;
		display: inline-block;
		transform: translateY(5px);
		text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
	}

	// ==========================================================================
	// MARCO DE IMAGEN PREMIUM TIPO GALERÍA
	// ==========================================================================

	.family__image-container {
		// Marco con múltiples capas
		padding: 20px;
		background: linear-gradient(
			135deg,
			rgba(var(--color-action-accent-rgb, 212, 175, 55), 0.8) 0%,
			rgba(139, 69, 19, 0.6) 50%,
			rgba(var(--color-action-accent-rgb, 212, 175, 55), 0.8) 100%
		);
		border-radius: 6px;
		box-shadow:
			0 20px 50px rgba(0, 0, 0, 0.7),
			inset 0 0 30px rgba(0, 0, 0, 0.5);
		position: relative;
		z-index: 5;

		// Sombras de contacto realistas
		filter: drop-shadow(0 5px 15px rgba(0, 0, 0, 0.5))
			drop-shadow(0 15px 30px rgba(0, 0, 0, 0.3));

		// Animación de flotación sutil
		animation: gentleFloat 8s ease-in-out infinite;

		@keyframes gentleFloat {
			0%,
			100% {
				transform: translateY(0);
			}
			50% {
				transform: translateY(-10px);
			}
		}

		// Remaches en esquinas del marco
		.frame-rivet {
			position: absolute;
			width: 10px;
			height: 10px;
			background: radial-gradient(
				circle at 30% 30%,
				#fff 0%,
				var(--color-action-accent, primitives.$base-gold-500) 70%,
				#000 100%
			);
			border-radius: 50%;
			box-shadow: 0 2px 4px rgba(0, 0, 0, 0.8);
			z-index: 6;

			&--tl {
				top: 15px;
				left: 15px;
			}
			&--tr {
				top: 15px;
				right: 15px;
			}
			&--bl {
				bottom: 15px;
				left: 15px;
			}
			&--br {
				bottom: 15px;
				right: 15px;
			}
		}
	}

	.family__image-outer-frame {
		border-radius: 4px;
		background: linear-gradient(
			135deg,
			rgba(var(--color-action-accent-rgb, 212, 175, 55), 0.9) 0%,
			rgba(var(--color-action-accent-rgb, 212, 175, 55), 0.5) 25%,
			rgba(var(--color-action-accent-rgb, 212, 175, 55), 0.2) 50%,
			rgba(var(--color-action-accent-rgb, 212, 175, 55), 0.5) 75%,
			rgba(var(--color-action-accent-rgb, 212, 175, 55), 0.9) 100%
		);
		box-shadow:
			0 8px 32px rgba(var(--color-action-accent-rgb, 212, 175, 55), 0.4),
			inset 0 1px 0 rgba(255, 255, 255, 0.2);
		padding: 12px;
		position: relative;
	}

	.family__image-frame {
		aspect-ratio: 3 / 4;
		border-radius: 2px;
		overflow: hidden;
		border: 1px solid rgba(var(--color-action-accent-rgb, 212, 175, 55), 0.4);
		position: relative;
		z-index: 2;
		box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.6);

		// Efecto de vidrio museo sobre la imagen
		&::after {
			content: '';
			position: absolute;
			inset: 0;
			background: linear-gradient(
				135deg,
				rgba(255, 255, 255, 0.05) 0%,
				rgba(255, 255, 255, 0) 50%,
				rgba(0, 0, 0, 0.1) 100%
			);
			pointer-events: none;
			z-index: 3;
		}

		img {
			width: 100%;
			height: 100%;
			object-fit: cover;
			transition: all 0.5s cubic-bezier(0.16, 1, 0.3, 1);
			filter: sepia(0.25) contrast(1.15) brightness(0.95);
			transform: scale(1.01); // Evita bordes blancos
		}

		&:hover {
			img {
				filter: sepia(0.1) contrast(1.1) brightness(1.05);
				transform: scale(1.03);
			}

			&::after {
				background: linear-gradient(
					135deg,
					rgba(255, 255, 255, 0.08) 0%,
					rgba(255, 255, 255, 0.02) 50%,
					rgba(0, 0, 0, 0.15) 100%
				);
			}
		}
	}

	// ==========================================================================
	// ORNAMENTOS MASCULINOS WESTERN/HACIENDA
	// ==========================================================================

	.family__card-ornament {
		position: absolute;
		pointer-events: none;
		opacity: 0.15;
		z-index: 1;

		// Herradura (reemplaza corazón) - Símbolo western de buena suerte
		&--heart {
			top: 2rem;
			right: 2rem;
			width: 40px;
			height: 40px;
			background: linear-gradient(
				135deg,
				#8b4513,
				var(--color-action-accent, primitives.$base-gold-500)
			);
			clip-path: polygon(
				20% 0%,
				80% 0%,
				100% 30%,
				100% 70%,
				80% 100%,
				20% 100%,
				0% 70%,
				0% 30%
			);
			border-radius: 2px;
			box-shadow: 0 2px 8px rgba(0, 0, 0, 0.4);

			// Efecto de metal forjado
			&::after {
				content: '';
				position: absolute;
				inset: 2px;
				background: linear-gradient(
					135deg,
					transparent,
					rgba(255, 255, 255, 0.1),
					transparent
				);
				clip-path: polygon(
					20% 0%,
					80% 0%,
					100% 30%,
					100% 70%,
					80% 100%,
					20% 100%,
					0% 70%,
					0% 30%
				);
			}
		}

		// Espuela (reemplaza rama) - Elemento western ecuestre
		&--branch {
			bottom: 2rem;
			left: 2rem;
			width: 60px;
			height: 30px;
			background: linear-gradient(
				90deg,
				#4b3621,
				var(--color-action-accent, primitives.$base-gold-500)
			);
			clip-path: polygon(
				40% 0%,
				60% 0%,
				70% 20%,
				90% 20%,
				90% 40%,
				70% 40%,
				60% 60%,
				40% 60%,
				30% 40%,
				10% 40%,
				10% 20%,
				30% 20%
			);
			box-shadow: 0 2px 8px rgba(0, 0, 0, 0.4);

			// Detalle de la espuela
			&::before {
				content: '';
				position: absolute;
				top: 50%;
				right: 5px;
				width: 8px;
				height: 8px;
				background: radial-gradient(circle, #fff 0%, #8b4513 70%, #000 100%);
				border-radius: 50%;
				transform: translateY(-50%);
				box-shadow: 0 1px 2px rgba(0, 0, 0, 0.8);
			}
		}

		// Símbolo de silla de montar (reemplaza hoja) - Elemento ecuestre
		&--leaf {
			bottom: 2rem;
			right: 2rem;
			width: 30px;
			height: 30px;
			background: linear-gradient(
				135deg,
				#3a2819,
				var(--color-action-accent, primitives.$base-gold-500)
			);
			clip-path: polygon(
				30% 0%,
				70% 0%,
				90% 30%,
				90% 70%,
				70% 100%,
				30% 100%,
				10% 70%,
				10% 30%
			);
			box-shadow: 0 2px 8px rgba(0, 0, 0, 0.4);

			// Detalle de la silla
			&::before {
				content: '';
				position: absolute;
				top: 40%;
				left: 50%;
				width: 12px;
				height: 4px;
				background: #8b4513;
				border-radius: 2px;
				transform: translate(-50%, -50%);
				box-shadow: 0 1px 2px rgba(0, 0, 0, 0.6);
			}
		}
	}

	// ==========================================================================
	// PATRONES DE CUERO TOOLING COMO ELEMENTOS DECORATIVOS
	// ==========================================================================

	.leather-tooling {
		position: absolute;
		opacity: 0.08;
		pointer-events: none;
		z-index: 0;

		// Patrón geométrico inspirado en tooling de cuero western
		&--geometric {
			width: 100%;
			height: 100%;
			background:
				repeating-linear-gradient(
					45deg,
					transparent,
					transparent 10px,
					rgba(var(--color-action-accent-rgb, 212, 175, 55), 0.1) 10px,
					rgba(var(--color-action-accent-rgb, 212, 175, 55), 0.1) 20px
				),
				repeating-linear-gradient(
					-45deg,
					transparent,
					transparent 10px,
					rgba(var(--color-action-accent-rgb, 212, 175, 55), 0.05) 10px,
					rgba(var(--color-action-accent-rgb, 212, 175, 55), 0.05) 20px
				);
		}
	}

	// ==========================================================================
	// ANIMACIONES Y TRANSICIONES PREMIUM
	// ==========================================================================

	// Entrada escalonada de elementos
	.family__card,
	.family__image-column,
	.family__name-item,
	.family__child-item {
		opacity: 0;
		transform: translateY(30px);
		transition:
			opacity 0.8s tokens.$ease-premium,
			transform 0.8s tokens.$ease-premium;

		.family.is-visible & {
			opacity: 1;
			transform: translateY(0);
		}
	}

	// Retrasos escalonados para entrada
	.family__card--spouse {
		transition-delay: 0.1s;
	}
	.family__card--children {
		transition-delay: 0.2s;
	}
	.family__card--parents {
		transition-delay: 0.3s;
	}
	.family__image-column {
		transition-delay: 0.4s;
	}

	// ==========================================================================
	// RESPONSIVIDAD PREMIUM
	// ==========================================================================

	@include respond-to(md) {
		padding: 8rem 1rem;

		&::after {
			inset: 1.5rem;
		}

		.family-rivet--tl {
			top: 1.5rem;
			left: 1.5rem;
		}
		.family-rivet--tr {
			top: 1.5rem;
			right: 1.5rem;
		}
		.family-rivet--bl {
			bottom: 1.5rem;
			left: 1.5rem;
		}
		.family-rivet--br {
			bottom: 1.5rem;
			right: 1.5rem;
		}

		.family__card-inner {
			padding: 2rem 1.5rem;
		}

		.family__image-container {
			animation: none; // Desactivar animación en móviles para rendimiento
			padding: 15px;
		}

		.frame-rivet {
			width: 8px;
			height: 8px;
		}

		.frame-rivet--tl {
			top: 10px;
			left: 10px;
		}
		.frame-rivet--tr {
			top: 10px;
			right: 10px;
		}
		.frame-rivet--bl {
			bottom: 10px;
			left: 10px;
		}
		.frame-rivet--br {
			bottom: 10px;
			right: 10px;
		}
	}

	@include respond-to(sm) {
		padding: 6rem 1rem;

		.family__title-main {
			font-size: clamp(2rem, 5vw, 3rem);
		}

		.family__name {
			font-size: 1.6rem;
		}

		.family__name--child {
			font-size: 1.4rem;
		}

		.family__card-ornament {
			display: none; // Ocultar ornamentos en móviles muy pequeños
		}
	}

	// ==========================================================================
	// ACCESIBILIDAD Y REDUCCIÓN DE MOVIMIENTO
	// ==========================================================================

	@media (prefers-reduced-motion: reduce) {
		.family__image-container {
			animation: none;
		}

		.family__title-main {
			animation: none;
		}

		.family__card,
		.family__image-column,
		.family__name-item,
		.family__child-item {
			opacity: 1;
			transform: none;
			transition: none;
		}

		.family__card-inner:hover {
			transform: none;
		}

		.family__image-frame img {
			transition: none;

			&:hover {
				transform: none;
				filter: sepia(0.25) contrast(1.15) brightness(0.95);
			}
		}
	}
}
