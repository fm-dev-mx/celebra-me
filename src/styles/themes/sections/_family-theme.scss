@use '../../global/mixins' as *;
@use '../../tokens' as tokens;
@use '../../tokens/primitives' as primitives;

// ==========================================================================
// FAMILY SECTION THEMES
// ==========================================================================

// --- JEWELRY BOX (XV / Wedding) ---
.family[data-variant='jewelry-box'] {
	background:
		radial-gradient(circle at 50% -20%, #fffdfc 0%, var(--color-surface-primary) 100%),
		repeating-linear-gradient(
			45deg,
			rgba(212, 175, 55, 0.01) 0,
			rgba(212, 175, 55, 0.01) 1px,
			transparent 1px,
			transparent 10px
		);
	padding: 10rem 2rem;
	position: relative;

	// Decorative silk wave overlay
	&::before {
		content: '';
		position: absolute;
		inset: 0;
		background:
			radial-gradient(
				ellipse at 0% 0%,
				rgba(var(--color-action-accent-rgb), 0.05) 0%,
				transparent 70%
			),
			radial-gradient(
				ellipse at 100% 100%,
				rgba(var(--color-action-accent-rgb), 0.05) 0%,
				transparent 70%
			);
		opacity: 0.6;
		pointer-events: none;
	}

	.family__suptitle {
		font-family: var(--font-display);
		color: var(--color-action-accent);
		text-transform: uppercase;
		letter-spacing: 0.3em;
		font-size: 0.9rem;
		opacity: 0.8;
	}

	.family__title-main {
		font-family: var(--font-display);
		font-size: clamp(2.5rem, 6vw, 4rem);
		font-weight: 300;
		background: linear-gradient(
			to right,
			var(--color-surface-dark) 0%,
			var(--color-action-accent) 50%,
			var(--color-surface-dark) 100%
		);
		background-clip: text;
		-webkit-background-clip: text;
		-webkit-text-fill-color: transparent;
		letter-spacing: 0.05em;
	}

	.family__card-inner {
		background: var(--color-glass-bg);
		border: 1px solid var(--color-glass-border);
		border-radius: 12px;
		box-shadow: var(--shadow-premium);
		backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-saturate));
		padding: 3rem 2rem;
		transition: all 0.5s tokens.$ease-premium;

		&:hover {
			transform: translateY(-8px);
			border-color: var(--color-action-accent);
			box-shadow: 0 25px 50px var(--color-glass-shadow);
		}

		// Double fine border for premium feel
		&::after {
			content: '';
			position: absolute;
			inset: 8px;
			border: 1px solid rgba(var(--color-action-accent-rgb), 0.1);
			border-radius: 8px;
			pointer-events: none;
		}
	}

	.family__card-subtitle {
		font-family: var(--font-display);
		color: var(--color-action-accent);
		font-size: 1.1rem;
		letter-spacing: 0.15em;
	}

	.family__calligraphy-ampersand {
		font-family: var(--font-calligraphy, 'Pinyon Script'), cursive;
		font-size: 3rem;
		color: var(--color-action-accent);
		line-height: 1;
		opacity: 0.6;
	}

	.family__name {
		font-family: var(--font-display);
		color: var(--color-surface-dark);
		font-size: 1.8rem;
		font-weight: 400;

		&::first-letter {
			color: var(--color-action-accent);
			font-size: 110%;
		}
	}

	.family__role {
		font-family: var(--font-display);
		color: var(--color-action-accent);
		font-size: 0.9rem;
		text-transform: uppercase;
		letter-spacing: 0.1em;
		opacity: 0.7;
	}

	.family__image-outer-frame {
		background: linear-gradient(
			135deg,
			rgba(var(--color-action-accent-rgb), 0.4) 0%,
			rgba(255, 255, 255, 0.8) 50%,
			rgba(var(--color-action-accent-rgb), 0.4) 100%
		);
		padding: 6px;
		border-radius: 8px;
		box-shadow: 0 10px 30px var(--color-glass-shadow);
	}

	.family__image-frame {
		border: 1px solid var(--color-glass-border);
		border-radius: 4px;
		overflow: hidden;

		img {
			filter: sepia(0.1) contrast(1.05) brightness(1.02);
		}
	}
}

// --- LUXURY HACIENDA PREMIUM (Gerardo / Masculine Elite) ---
.family[data-variant='luxury-hacienda'] {
	background-color: var(--color-surface-primary);
	background-image:
		radial-gradient(circle at 25% 25%, rgba(0, 0, 0, 0.05) 2%, transparent 2.5%),
		radial-gradient(circle at 75% 75%, rgba(0, 0, 0, 0.05) 2%, transparent 2.5%),
		linear-gradient(45deg, transparent 49%, rgba(0, 0, 0, 0.03) 50%, transparent 51%);
	background-size:
		100px 100px,
		100px 100px,
		20px 20px;
	background-blend-mode: multiply;
	padding: 10rem 2rem;
	position: relative;

	.family__suptitle {
		font-family: tokens.$font-display-hacienda;
		color: var(--color-action-accent);
		letter-spacing: 0.15em;
	}

	.family__title-main {
		font-family: tokens.$font-display-hacienda;
		color: var(--color-text-primary);
		text-transform: uppercase;
		letter-spacing: 0.12em;
		font-weight: 500;
		background: linear-gradient(
			to right,
			primitives.$base-gold-300,
			primitives.$base-gold-500,
			primitives.$base-gold-300
		);
		-webkit-background-clip: text;
		background-clip: text;
		color: transparent;
		background-size: 200% auto;
		animation: goldShimmer 3s ease-in-out infinite;
	}

	.family__card-inner {
		background: tokens.$color-glass-bg;
		border: 1px solid rgba(var(--color-action-accent-rgb), 0.25);
		backdrop-filter: blur(12px) saturate(180%);
		border-radius: 4px;
		box-shadow:
			tokens.$shadow-emphasis,
			inset 0 0 20px rgba(var(--color-action-accent-rgb), 0.1);
		position: relative;

		&::before {
			content: '';
			position: absolute;
			inset: 0;
			border-radius: inherit;
			background: linear-gradient(
				135deg,
				rgba(var(--color-action-accent-rgb), 0.05) 0%,
				transparent 50%,
				rgba(var(--color-action-accent-rgb), 0.05) 100%
			);
			pointer-events: none;
			z-index: -1;
		}
	}

	.family__card-subtitle {
		font-family: tokens.$font-display-hacienda;
		color: var(--color-action-accent);
		letter-spacing: 0.2em;
	}

	.family__name {
		font-family: tokens.$font-display-hacienda;
		color: var(--color-text-primary);

		&::first-letter {
			font-family: tokens.$font-display-hacienda;
			color: var(--color-action-accent);
		}
	}

	.family__role {
		font-family: tokens.$font-ui;
		color: rgba(var(--color-text-primary-rgb), 0.7);

		&--accent {
			color: var(--color-action-accent);
		}
	}

	.family__child-number {
		background: linear-gradient(
			135deg,
			rgba(var(--color-action-accent-rgb), 0.1),
			rgba(var(--color-action-accent-rgb), 0.05)
		);
		border: 1px solid rgba(var(--color-action-accent-rgb), 0.2);
		border-radius: 4px;
		color: var(--color-action-accent);
		font-family: tokens.$font-ui;
	}

	.family__image-outer-frame {
		background: linear-gradient(
			135deg,
			rgba(var(--color-action-accent-rgb), 0.8) 0%,
			rgba(var(--color-action-accent-rgb), 0.4) 25%,
			rgba(var(--color-action-accent-rgb), 0.1) 50%,
			rgba(var(--color-action-accent-rgb), 0.4) 75%,
			rgba(var(--color-action-accent-rgb), 0.8) 100%
		);
		box-shadow:
			0 8px 32px rgba(var(--color-action-accent-rgb), 0.3),
			inset 0 1px 0 rgba(255, 255, 255, 0.2);
	}

	.family__card-ornament {
		opacity: 0.12;

		&--heart {
			background: linear-gradient(
				135deg,
				rgba(var(--color-action-accent-rgb), 0.8),
				transparent
			);
			border-radius: 2px;
		}

		&--branch {
			background: linear-gradient(
				90deg,
				transparent,
				rgba(var(--color-action-accent-rgb), 0.6),
				transparent
			);
		}

		&--leaf {
			background: linear-gradient(
				135deg,
				rgba(var(--color-action-accent-rgb), 0.7),
				transparent
			);
		}
	}

	// ==========================================================================
	// PATRONES DE CUERO TOOLING COMO ELEMENTOS DECORATIVOS
	// ==========================================================================

	.leather-tooling {
		position: absolute;
		opacity: 0.08;
		pointer-events: none;
		z-index: 0;

		// Patrón geométrico inspirado en tooling de cuero western
		&--geometric {
			width: 100%;
			height: 100%;
			background:
				repeating-linear-gradient(
					45deg,
					transparent,
					transparent 10px,
					rgba(var(--color-action-accent-rgb, 212, 175, 55), 0.1) 10px,
					rgba(var(--color-action-accent-rgb, 212, 175, 55), 0.1) 20px
				),
				repeating-linear-gradient(
					-45deg,
					transparent,
					transparent 10px,
					rgba(var(--color-action-accent-rgb, 212, 175, 55), 0.05) 10px,
					rgba(var(--color-action-accent-rgb, 212, 175, 55), 0.05) 20px
				);
		}
	}

	// ==========================================================================
	// ANIMACIONES Y TRANSICIONES PREMIUM
	// ==========================================================================

	// Entrada escalonada de elementos
	.family__card,
	.family__image-column,
	.family__name-item,
	.family__child-item {
		opacity: 0;
		transform: translateY(30px);
		transition:
			opacity 0.8s tokens.$ease-premium,
			transform 0.8s tokens.$ease-premium;

		.family.is-visible & {
			opacity: 1;
			transform: translateY(0);
		}
	}

	// Retrasos escalonados para entrada
	.family__card--spouse {
		transition-delay: 0.1s;
	}
	.family__card--children {
		transition-delay: 0.2s;
	}
	.family__card--parents {
		transition-delay: 0.3s;
	}
	.family__image-column {
		transition-delay: 0.4s;
	}

	// ==========================================================================
	// RESPONSIVIDAD PREMIUM
	// ==========================================================================

	@include respond-to(md) {
		padding: 8rem 1rem;

		&::after {
			inset: 1.5rem;
		}

		.family-rivet--tl {
			top: 1.5rem;
			left: 1.5rem;
		}
		.family-rivet--tr {
			top: 1.5rem;
			right: 1.5rem;
		}
		.family-rivet--bl {
			bottom: 1.5rem;
			left: 1.5rem;
		}
		.family-rivet--br {
			bottom: 1.5rem;
			right: 1.5rem;
		}

		.family__card-inner {
			padding: 2rem 1.5rem;
		}

		.family__image-container {
			animation: none; // Desactivar animación en móviles para rendimiento
			padding: 15px;
		}

		.frame-rivet {
			width: 8px;
			height: 8px;
		}

		.frame-rivet--tl {
			top: 10px;
			left: 10px;
		}
		.frame-rivet--tr {
			top: 10px;
			right: 10px;
		}
		.frame-rivet--bl {
			bottom: 10px;
			left: 10px;
		}
		.frame-rivet--br {
			bottom: 10px;
			right: 10px;
		}
	}

	@include respond-to(sm) {
		padding: 6rem 1rem;

		.family__title-main {
			font-size: clamp(2rem, 5vw, 3rem);
		}

		.family__name {
			font-size: 1.6rem;
		}

		.family__name--child {
			font-size: 1.4rem;
		}

		.family__card-ornament {
			display: none; // Ocultar ornamentos en móviles muy pequeños
		}
	}

	// ==========================================================================
	// ACCESIBILIDAD Y REDUCCIÓN DE MOVIMIENTO
	// ==========================================================================

	@media (prefers-reduced-motion: reduce) {
		.family__image-container {
			animation: none;
		}

		.family__title-main {
			animation: none;
		}

		.family__card,
		.family__image-column,
		.family__name-item,
		.family__child-item {
			opacity: 1;
			transform: none;
			transition: none;
		}

		.family__card-inner:hover {
			transform: none;
		}

		.family__image-frame img {
			transition: none;

			&:hover {
				transform: none;
				filter: sepia(0.25) contrast(1.15) brightness(0.95);
			}
		}
	}
}
