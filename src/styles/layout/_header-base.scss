@use '../global/mixins' as *;
@use '../tokens' as tokens;

.header-base {
	--header-height: 100px;
	--header-height-scrolled: 70px;
	--header-transition: #{tokens.$duration-slower};
	--header-ease: #{tokens.$ease-premium};
	--header-glass-bg: rgba(#{tokens.$color-surface-dark-rgb}, 0.8);
	--header-glass-blur: 15px;
	--header-glass-saturate: 160%;
	--header-scrolled-bg: rgba(#{tokens.$color-surface-dark-rgb}, 0.9);
	--header-shadow: #{tokens.$shadow-emphasis};

	position: fixed;
	top: 0;
	left: 0;
	width: 100%;
	height: var(--header-height);
	z-index: 1000;
	transition:
		height var(--header-transition) var(--header-ease),
		background-color var(--header-transition) var(--header-ease),
		backdrop-filter var(--header-transition) var(--header-ease),
		transform var(--header-transition) var(--header-ease),
		box-shadow var(--header-transition) var(--header-ease);
	border-bottom: 1px solid transparent;
	background-color: var(--header-bg);
	backdrop-filter: blur(var(--header-glass-blur)) saturate(var(--header-glass-saturate));

	&::before {
		content: '';
		position: absolute;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		background: linear-gradient(to bottom, rgb(0 0 0 / 40%) 0%, transparent 100%);
		opacity: 0%; // Only visible in transparent mode
		transition: opacity var(--header-transition) var(--header-ease);
		pointer-events: none;
	}

	&--transparent {
		background-color: transparent !important;
		backdrop-filter: none !important;
		border-bottom-color: transparent !important;

		&::before {
			opacity: 100%;
		}
	}

	&--scrolled {
		height: var(--header-height-scrolled);
		background-color: var(--header-bg-scrolled);
		backdrop-filter: blur(20px) saturate(180%);
		border-bottom: 1px solid rgb(255 255 255 / 5%);
		box-shadow: var(--header-shadow);
	}

	&--hidden {
		transform: translateY(-100%);
	}

	&--menu-open {
		height: 100dvh !important;
		transform: translateY(0) !important;
		background-color: transparent !important;
		backdrop-filter: none !important;
		border-bottom-color: transparent !important;
		box-shadow: none !important;

		&::before {
			opacity: 0% !important;
		}

		.header-base__container {
			height: var(--header-height);
			border-bottom: 1px solid rgb(255 255 255 / 10%);
			background: var(--header-scrolled-bg);

			// Ensures the top bar is opaque while the rest of the page (covered by 100vh header) is transparent
		}
	}

	&__container {
		max-width: 1400px;
		margin: 0 auto;
		padding: 0 4rem;
		height: 100%;
		display: flex;
		align-items: center;
		justify-content: space-between;

		@include respond-to(md) {
			padding: 0 6rem;
		}
	}

	&__logo {
		height: 40px;
		transition: transform 0.4s var(--header-ease);

		&:hover {
			transform: scale(1.02);
		}
	}

	&__desktop-nav {
		display: none;

		@include respond-to(lg) {
			display: block;
		}
	}

	/* Premium Mobile Navigation (NavBarMobile.tsx) */
	&__mobile-toggle {
		position: relative;
		z-index: 1010;
		padding: 0.5rem;
		background: transparent;
		border: none;
		cursor: pointer;
		color: var(--color-primary);
		display: block;

		@include respond-to(md) {
			display: none;
		}

		.hamburger {
			width: 24px;
			height: 20px;
			display: flex;
			flex-direction: column;
			justify-content: space-between;
			align-items: center;

			&__line {
				width: 100%;
				height: 2px;
				background-color: currentcolor;
				border-radius: 4px;
			}
		}
	}

	&__mobile-overlay {
		position: fixed;
		inset: 0;
		background-color: rgb(0 0 0 / 60%);
		backdrop-filter: blur(8px);
		z-index: 1005;
	}

	&__mobile-menu {
		position: fixed;
		top: 0;
		right: 0;
		bottom: 0;
		width: 85%;
		max-width: 380px;
		background-color: var(--header-scrolled-bg);
		border-left: 1px solid rgb(255 255 255 / 10%);
		z-index: 1008;
		display: flex;
		flex-direction: column;
		padding: 8rem 2rem 3rem;
		box-shadow: -10px 0 30px rgb(0 0 0 / 50%);
	}
}

/* Flattened Mobile Nav Blocks */
.mobile-nav-links {
	display: flex;
	flex-direction: column;
	gap: 2rem;

	&__link {
		font-family: var(--font-display);
		font-size: 1.75rem;
		color: var(--color-primary-light);
		text-decoration: none;
		letter-spacing: 0.15em;
		text-transform: uppercase;
		transition: color 0.3s ease;

		&:hover {
			color: var(--color-primary);
		}
	}
}

.mobile-nav-footer {
	margin-top: auto;
	text-align: center;

	&__divider {
		height: 1px;
		width: 100%;
		background: linear-gradient(to right, transparent, rgb(255 255 255 / 10%), transparent);
		margin-bottom: 2rem;
	}

	&__copy {
		color: rgb(255 255 255 / 40%);
		font-size: 0.75rem;
		font-family: var(--font-body);
		letter-spacing: 0.2em;
	}
}
