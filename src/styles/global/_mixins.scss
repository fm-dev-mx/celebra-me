// src/styles/global/_mixins.scss

@use 'sass:map';
@use 'sass:list';
@use 'functions' as funcs;
@use '../tokens' as tokens;

$transitions-by-component: (
	button: (
		duration: tokens.$duration-snappy,
		timing: tokens.$ease-in-out,
	),
	card: (
		duration: tokens.$duration-standard,
		timing: tokens.$ease-snappy,
	),
	card-item: (
		duration: tokens.$duration-standard,
		timing: tokens.$ease-overshoot,
	),
	header: (
		duration: tokens.$duration-premium,
		timing: tokens.$ease-in-out,
	),
	menu: (
		duration: tokens.$duration-snappy,
		timing: tokens.$ease-snappy,
	),
	modal: (
		duration: tokens.$duration-snappy,
		timing: tokens.$ease-bouncy,
	),
	section-nav-button: (
		duration: tokens.$duration-standard,
		timing: ease-in-out,
	),
	whatsapp-button: (
		duration: tokens.$duration-standard,
		timing: ease-in-out,
	),
	whatsapp-button-after: (
		duration: tokens.$duration-standard,
		timing: tokens.$ease-overshoot,
	),
);

$breakpoints: (
	xs: 375px,
	sm: 640px,
	md: 768px,
	lg: 1024px,
	xl: 1280px,
	xxl: 1536px,
);

/// Applies a transition based on component settings.
@mixin transition($component) {
	$settings: map.get($transitions-by-component, $component);
	@if $settings {
		transition: all map.get($settings, duration) map.get($settings, timing);
	} @else {
		@warn "No transition settings found for `#{$component}`. Using default transition.";
		transition: all tokens.$duration-standard tokens.$ease-in-out;
	}
}

/// Sets both min and max height.
@mixin set-menu-height($height) {
	min-height: $height;
	max-height: $height;
}

/// Media query mixin for a given breakpoint key.
@mixin respond-to($breakpoint) {
	@if map.has-key($breakpoints, $breakpoint) {
		@media (min-width: #{map.get($breakpoints, $breakpoint)}) {
			@content;
		}
	} @else {
		@error "Breakpoint `#{$breakpoint}` does not exist in \$breakpoints.";
	}
}

// Typography scale for reusable text styles.
$typography-scale: (
	display-2: (
		font-family: var(--font-display),
		font-size: 2.5rem,
		font-weight: 600,
		line-height: 1.1,
		letter-spacing: -0.02em,
	),
	h3: (
		font-family: var(--font-display),
		font-size: 1.5rem,
		font-weight: 600,
		line-height: 1.25,
	),
	h4: (
		font-family: var(--font-display),
		font-size: 1.25rem,
		font-weight: 600,
		line-height: 1.3,
	),
	body-large: (
		font-family: var(--font-body),
		font-size: 1.15rem,
		font-weight: 400,
		line-height: 1.6,
	),
	body-small: (
		font-family: var(--font-body),
		font-size: 0.95rem,
		font-weight: 400,
		line-height: 1.6,
	),
	button: (
		font-family: var(--font-body),
		font-size: 0.9rem,
		font-weight: 600,
		letter-spacing: 0.05em,
		text-transform: uppercase,
	),
);

@mixin typography($variant) {
	@if map.has-key($typography-scale, $variant) {
		$styles: map.get($typography-scale, $variant);
		@each $property, $value in $styles {
			#{$property}: $value;
		}
	} @else {
		@error "Typography variant `#{$variant}` is not defined.";
	}
}

// Premium Texture Mixins
@mixin paper-texture {
	background-image:
		radial-gradient(circle at 25% 25%, rgba(0, 0, 0, 0.05) 2%, transparent 2.5%),
		radial-gradient(circle at 75% 75%, rgba(0, 0, 0, 0.05) 2%, transparent 2.5%),
		linear-gradient(45deg, transparent 49%, rgba(0, 0, 0, 0.03) 50%, transparent 51%);
	background-size:
		100px 100px,
		100px 100px,
		20px 20px;
	background-blend-mode: multiply;
}

@mixin leather-texture {
	background-image:
		radial-gradient(ellipse at 30% 20%, rgba(0, 0, 0, 0.1) 0%, transparent 50%),
		radial-gradient(ellipse at 70% 80%, rgba(0, 0, 0, 0.1) 0%, transparent 50%),
		linear-gradient(105deg, transparent 40%, rgba(0, 0, 0, 0.05) 50%, transparent 60%);
	background-size:
		200% 200%,
		200% 200%,
		100% 100%;
	background-blend-mode: overlay;
}

@mixin gold-foil {
	background: linear-gradient(
		135deg,
		rgba(var(--color-action-accent-rgb, 220, 180, 60), 0.1) 0%,
		rgba(var(--color-action-accent-rgb, 220, 180, 60), 0.3) 25%,
		rgba(255, 223, 0, 0.4) 50%,
		rgba(var(--color-action-accent-rgb, 220, 180, 60), 0.3) 75%,
		rgba(var(--color-action-accent-rgb, 220, 180, 60), 0.1) 100%
	);
	background-size: 200% 200%;
	animation: shimmer 3s ease-in-out infinite;
}

@mixin lift-on-hover {
	transition:
		transform 0.3s cubic-bezier(0.16, 1, 0.3, 1),
		box-shadow 0.3s cubic-bezier(0.16, 1, 0.3, 1);

	&:hover {
		transform: translateY(-4px);
		box-shadow: 0 12px 24px rgba(0, 0, 0, 0.2);
	}
}

@mixin engraved-text {
	color: transparent;
	background-clip: text;
	-webkit-background-clip: text;
	background-image: linear-gradient(
		to bottom,
		rgba(255, 255, 255, 0.8) 0%,
		rgba(255, 255, 255, 0.4) 50%,
		rgba(0, 0, 0, 0.2) 51%,
		rgba(0, 0, 0, 0.6) 100%
	);
	text-shadow: 0 1px 1px rgba(0, 0, 0, 0.3);
}
