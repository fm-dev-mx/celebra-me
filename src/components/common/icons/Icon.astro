---
/**
 * Universal Icon Component
 * Maps string-based icon names to the new React-based atomic icons.
 * Use this for dynamic icons (CMS, JSON data) or legacy migrations.
 */
import {
    ArrowDownIcon,
    ArrowRightIcon,
    ArrowUpIcon,
    StarIcon,
    HeartIcon,
    SparklesIcon,
    UserGroupIcon,
    MessageIcon,
    AppLogoIcon,
    ChevronDownIcon,
    CopyIcon,
    BankCardIcon,
    CashIcon
} from './ui';
import { WhatsAppIcon, PayPalIcon } from './social';
import {
    CrownIcon,
    RingsIcon,
    DoveIcon,
    DiamondIcon,
    GiftIcon,
    ChurchIcon,
    ReceptionIcon,
    PartyIcon,
    CakeIcon,
    PhotoIcon,
    WaltzIcon,
    DinnerIcon,
    ToastIcon,
    MapLocationIcon,
    ForbiddenIcon,
    EnvelopedIcon,
    WesternHatIcon,
    TacoIcon,
    TubaIcon,
    AccordionIcon
} from './invitation';
import type React from 'react';

interface Props {
	name: string;
	size?: number | string;
	class?: string;
}

const { name, size, class: className } = Astro.props;

/**
 * Universal Icon Registry
 * Maps string-based icon names to the new React-based atomic icons.
 */
const icons: Record<
	string,
	React.FC<{ size?: number | string; className?: string; style?: React.CSSProperties }>
> = {
    // UI
    ArrowDownIcon,
    ArrowDown: ArrowDownIcon,
    ArrowRightIcon,
    ArrowRight: ArrowRightIcon,
    ArrowUpIcon,
    ArrowUp: ArrowUpIcon,
    StarIcon,
    Star: StarIcon,
    HeartIcon,
    Heart: HeartIcon,
    SparklesIcon,
    Sparkles: SparklesIcon,
    UserGroupIcon,
    UserGroup: UserGroupIcon,
    MessageIcon,
    Message: MessageIcon,
    AppLogoIcon,
    AppLogo: AppLogoIcon,
    ChevronDownIcon,
    ChevronDown: ChevronDownIcon,
    CopyIcon,
    Copy: CopyIcon,
    BankCardIcon,
    BankCard: BankCardIcon,
    CashIcon,
    Cash: CashIcon,

    // Social
    WhatsAppIcon,
    WhatsApp: WhatsAppIcon,
    PayPalIcon,
    PayPal: PayPalIcon,

    // Invitation
    CrownIcon,
    Crown: CrownIcon,
    RingsIcon,
    Rings: RingsIcon,
    DoveIcon,
    Dove: DoveIcon,
    DiamondIcon,
    Diamond: DiamondIcon,
    GiftIcon,
    Gift: GiftIcon,
    ChurchIcon,
    Church: ChurchIcon,
    ReceptionIcon,
    Reception: ReceptionIcon,
    PartyIcon,
    Party: PartyIcon,
    CakeIcon,
    Cake: CakeIcon,
    PhotoIcon,
    Photo: PhotoIcon,
    WaltzIcon,
    Waltz: WaltzIcon,
    DinnerIcon,
    Dinner: DinnerIcon,
    ToastIcon,
    Toast: ToastIcon,
    MapLocationIcon,
    MapLocation: MapLocationIcon,
    Map: MapLocationIcon,
    ForbiddenIcon,
    Forbidden: ForbiddenIcon,
    EnvelopedIcon,
    Enveloped: EnvelopedIcon,
    Envelope: EnvelopedIcon,
    WesternHatIcon,
    WesternHat: WesternHatIcon,
    'western-hat': WesternHatIcon,
    TacoIcon,
    Taco: TacoIcon,
    taco: TacoIcon,
    TubaIcon,
    Tuba: TubaIcon,
    tuba: TubaIcon,
    AccordionIcon,
    Accordion: AccordionIcon,
    accordion: AccordionIcon
};

const SelectedIcon = icons[name];

// Combine classes: 'universal-icon' is always required
const combinedClass = ['universal-icon', className].filter(Boolean).join(' ');
---

{
	SelectedIcon ? (
		<SelectedIcon size={size} className={combinedClass} />
	) : (
		<div
			class:list={[
				'universal-icon--fallback',
				className,
			]}
		>
			{name?.charAt(0) || '?'}
		</div>
	)
}

<style define:vars={{ width: size, height: size }}>
	.universal-icon--fallback {
		width: var(--width);
		height: var(--height);
	}
</style>
