---
// Custom Google Map component with CSS filter styling.
interface Props {
    lat: number;
    lng: number;
    zoom?: number;
    title?: string;
}
---
<div class="google-map-container">
    <iframe
        width="100%"
        height="100%"
        src={`https://maps.google.com/maps?q=${Astro.props.lat},${Astro.props.lng}&z=${Astro.props.zoom || 15}&output=embed`}
        title={Astro.props.title}
        aria-label={Astro.props.title}
        loading="lazy"
    >
    </iframe>
    <div class="map-overlay" aria-hidden="true"></div>
</div>

<style lang="scss">
    .google-map-container {
        position: relative;
        width: 100%;
        height: 100%;
        overflow: hidden;
        border-radius: var(--radius-md, 8px); // Use design token if available, fallback to 8px
        background-color: var(--color-surface-200, #f5f5f5); // Placeholder background
        isolation: isolate; // Create a new stacking context

        iframe {
            width: 100%;
            height: 100%;
            border: 0;
            // The "Jewelry Box" aesthetic filter:
            // Grayscale: Removes color
            // Sepia: Adds the antique tone
            // Contrast: Softens the blacks
            filter: grayscale(100%) sepia(20%) contrast(0.9);
            transition: filter 0.3s ease;
            mix-blend-mode: multiply; /* Optional: blends with background if needed, but filter is safer */
        }

        // Overlay to prevent accidental scroll hijacking and add texture if needed
        .map-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none; // Let clicks pass through to iframe if desired, or toggle on click
            box-shadow: inset 0 0 20px rgba(0,0,0,0.1); // Inner shadow for depth
            border: 1px solid rgba(var(--color-primary-rgb), 0.2); // Subtle border using theme color
            border-radius: inherit;
        }

        &:hover iframe {
            // Optional: Bring back some color on hover if desired, or just slight clear up
            // filter: grayscale(80%) sepia(10%);
        }
    }
</style>
