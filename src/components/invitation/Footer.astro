---
// src/components/invitation/Footer.astro
import '@/styles/invitation/_footer.scss';
import Logo from '@/components/ui/Logo.astro';
import OptimizedImage from '@/components/common/OptimizedImage.astro';

interface Props {
	eventSlug?: string;
	showEnvelope?: boolean;
}

const { eventSlug, showEnvelope = false } = Astro.props;

// Define contact details
const contactNumber = '526681167477';
const whatsappMessage = 'Hola, estoy interesado en crear una invitación digital.';
const whatsappLink = `https://api.whatsapp.com/send?phone=${contactNumber}&text=${encodeURIComponent(whatsappMessage)}`;
---

<footer class="invitation-footer">
	<div class="footer-content">
		<div class="footer-info">
			<p class="powered-by">Powered by</p>
			<Logo variant="xv" />
		</div>
		<div class="footer-contact">
			<a
				class="whatsapp-button"
				href={whatsappLink}
				target="_blank"
				rel="noopener noreferrer"
			>
				<OptimizedImage
					imagePath="/icons/whatsappIcon.svg"
					alt="WhatsApp"
					width={24}
					height={24}
					class="w-6 h-6"
				/>
				Contáctanos
			</a>
		</div>
		{showEnvelope && eventSlug && (
			<button
				class="footer__replay-link"
				data-slug={eventSlug}
				aria-label="Volver a ver la apertura del sobre"
			>
				✉ Volver a ver la apertura
			</button>
			<script is:inline>
				document.querySelector('.footer__replay-link')?.addEventListener('click', function() {
					const slug = this.dataset.slug;
					localStorage.removeItem(`envelope-opened-${slug}`);
					location.reload();
				});
			</script>
		)}
	</div>
</footer>
