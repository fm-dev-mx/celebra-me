---
// Services.astro
// This component displays the services offered, including images and descriptions.

import Container from "@/components/layout/Container.astro";
import Grid from "@/components/layout/Grid.astro";
import GridCell from "@/components/layout/GridCell.astro";
import GridRow from "@/components/layout/GridRow.astro";
import Section from "@/components/layout/Section.astro";
import Action from "@/components/common/Action.astro";
import ActionWrapper from "@/components/common/ActionWrapper.astro";
import OptimizedImage from "@/components/common/OptimizedImage.astro";
import ImageWrapper from "@/components/common/ImageWrapper.astro";
import SectionTitle from "@/components/typography/SectionTitle.astro";
import ServiceItem from "@/components/ui/ServiceItem.astro";
import type { ServicesData } from "@/config/landing.interface";

// Import local images
import xvImage from "@/images/services/xv.jpg";
import weddingPartyImage from "@/images/services/weddingParty.jpg";

interface Props {
	data: ServicesData;
}

const { data } = Astro.props;

// Helper function to chunk array into groups
const chunkArray = (arr: any[], size: number) =>
	Array.from({ length: Math.ceil(arr.length / size) }, (v, i) =>
		arr.slice(i * size, i * size + size),
	);

// Split services into two groups
const [firstServiceGroup, secondServiceGroup] = chunkArray(data.services, 2);
---

<Section id="services-section" relative="relative">
	<SectionTitle>
		{data.title}
	</SectionTitle>
	<Container>
		<Grid gap="xl:gap-8">
			<GridRow columns={2} gap="gap-x-24">
				<GridCell>
					{/* Image wrapper with hover effect classes */}
					<ImageWrapper
						class="overflow-hidden transition-all duration-300 ease-in-out transform hover:scale-102 hover:shadow-lg rounded-lg"
					>
						<OptimizedImage
							imagePath={xvImage}
							alt="Fiesta de Quinceañera"
							width={800}
							height={600}
						/>
					</ImageWrapper>
				</GridCell>
				<GridCell>
					{
						firstServiceGroup.map((service, index) => (
							<ServiceItem service={service} key={index} />
						))
					}
				</GridCell>
			</GridRow>
			<GridRow columns={2} gap="gap-x-24">
				<GridCell>
					{
						secondServiceGroup.map((service, index) => (
							<ServiceItem service={service} key={index} />
						))
					}
				</GridCell>
				<GridCell>
					{/* Image wrapper with hover effect classes */}
					<ImageWrapper
						class="overflow-hidden transition-all duration-300 ease-in-out transform hover:scale-102 hover:shadow-lg rounded-lg"
					>
						<OptimizedImage
							imagePath={weddingPartyImage}
							alt="Personas bailando en una fiesta"
							width={800}
							height={600}
						/>
					</ImageWrapper>
				</GridCell>
			</GridRow>
		</Grid>
	</Container>

	{/* CTA Button */}
	<ActionWrapper margin="mt-24">
		<Action
			variant="tertiary"
			href="#"
			class="w-full md:w-auto bg-secondary border-2 border-secondary-light border-dashed hover:border-opacity-50"
			title="Ver demos de invitaciones"
		>
			Elegir mi invitación
		</Action>
	</ActionWrapper>

	{/* Scroll to About Section Button */}
	<ActionWrapper margin="mt-24">
		<Action
			variant="scroll"
			href="#about-section"
			title="Click to learn more about us"
			icon="ArrowDownIcon"
			class="border-secondary-light bg-secondary hover:text-secondary-light"
		/>
	</ActionWrapper>
</Section>
