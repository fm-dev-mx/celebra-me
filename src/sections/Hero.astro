---
// Hero.astro
// This component represents the hero section of the website with enhanced UI/UX and performance optimizations

import Action from "@/components/common/Action.astro";
import ActionWrapper from "@/components/common/ActionWrapper.astro";
import Section from "@/components/layout/Section.astro";
import StyledContainer from "@/components/layout/StyledContainer.astro";
import type { Icon as IconType } from "@/config/landing.interface";
import bgHeroDesktop from "@/images/hero/bgHeroDesktop.jpg";
import bgHeroMobile from "@/images/hero/bgHeroMobile.jpg";
import Logo from "@/components/typography/Logo.astro";
import SectionTitle from "@/components/typography/SectionTitle.astro";
import SectionSubtitle from "@/components/typography/SectionSubtitle.astro";

// Define the expected data structure for the Hero component
interface HeroData {
	icon?: IconType;
	title: string;
	subtitle: string;
	primaryCta: string;
	secondaryCta: string;
}

interface Props {
	data: HeroData;
}

const { data } = Astro.props;

// Extract reusable styles for better maintainability and performance
const sectionStyles = {
	backgroundImageDesktop: bgHeroDesktop.src,
	backgroundImageMobile: bgHeroMobile.src,
	padding: "py-20",
	relative: "relative",
	fullWidth: true,
	fullHeight: true,
};

// Preload critical assets for performance
const preloadAssets = [
	{ href: bgHeroDesktop.src, as: "image" },
	{ href: bgHeroMobile.src, as: "image" },
];
---

{/* Preload critical assets */}
{preloadAssets.map((asset) => <link rel="preload" href={asset.href} as={asset.as} />)}

<Section id="hero-section" {...sectionStyles}>
	{/* Semi-transparent overlay with improved accessibility */}
	<StyledContainer
		padding="py-14"
		width="w-5/6 md:w-5xl"
		minWidth="min-w-[300px]"
		maxWidth="max-w-[700px]"
		height="h-full"
		maxHeight="max-h-full"
		margin="m-auto"
		verticalAlign="items-center"
		horizontalAlign="justify-center"
		backgroundColor="bg-white"
		shadow="shadow-2xl"
		opacity="opacity-80"
		relative=""
		rounded="rounded-2xl"
		extraClasses="text-center"
	>
		<SectionTitle
			margin="mb-10"
			align="text-center"
			size="text-lg sm:text-xl md:text-2xl lg:text-3xl"
			color="text-primary/60"
			weight="font-light"
			letterSpacing="tracking-widest"
			animation="slide-in-left"
			extraClass="shadow-text-light"
		>
			{data.title}
		</SectionTitle>

		{/* Logo */}
		<Logo
			as="h1"
			iconSize="w-7 h-7 sm:w-8 sm:h-8 md:w-9 md:h-9 lg:w-10 lg:h-10 xl:w-11 xl:h-11"
			iconPrimaryColor="var(--accent-dark)"
			iconSecondaryColor="var(--secondary-light)"
			textAnimation="shimmer permanent-glow"
			data-text="celebra-me"
			iconAnimation="permanent-glow-favicon"
		/>

		{/* Subtitle with improved visibility and responsiveness */}
		<SectionSubtitle
			size="text-lg sm:text-xl md:text-2xl lg:text-3xl"
			align="text-center"
			weight="font-light"
			color="text-primary"
			fontFamily="font-sans"
			margin="mx-12 mx-auto"
			letterSpacing="tracking-widest"
			animation="fade-in fade-slow"
			maxWidth="max-w-3xl"
		>
			{data.subtitle}
		</SectionSubtitle>

		{/* Call-to-Action buttons */}
		<ActionWrapper margin="mt-24" gap="gap-4 sm:gap-6">
			<Action variant="primary" color="secondary" href="#" class="">
				{data.primaryCta}
			</Action>
			<Action variant="secondary" color="secondary" href="#">
				{data.secondaryCta}
			</Action>
		</ActionWrapper>
		<!-- Scroll button -->
		<Action
			variant="scroll"
			href="#services-section"
			title="Ir a secciÃ³n de Servicios"
			icon="ArrowDownIcon"
			color="primary"
		/>
	</StyledContainer>
</Section>

<style>
	/* Optimize background image loading */
	#hero-section {
		background-image: url("/images/hero/bgHeroMobile.jpg");
		background-size: cover;
		background-position: center;
	}

	@media (min-width: 768px) {
		#hero-section {
			background-image: url("/images/hero/bgHeroDesktop.jpg");
		}
	}

	/* Add smooth scrolling for better UX */
	html {
		scroll-behavior: smooth;
	}
</style>
