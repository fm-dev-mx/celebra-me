---
import Container from "@/components/layout/Container.astro";
import Grid from "@/components/layout/Grid.astro";
import GridCell from "@/components/layout/GridCell.astro";
import GridRow from "@/components/layout/GridRow.astro";
import Section from "@/components/layout/Section.astro";
import Bullet from "@/components/ui/Bullet.astro";
import BulletWrapper from "@/components/ui/BulletWrapper.astro";
import Card from "@/components/ui/Card.tsx";
import SectionSubtitle from "@/components/ui/SectionSubtitle.astro";
import SectionTitle from "@/components/ui/SectionTitle.astro";
import type { Icon as IconType, PricingData } from "@/config/landing.interface";

// Define the properties interface for the component
interface Props {
	data: PricingData;
}

// Destructure the data property from Astro.props
const { data } = Astro.props;
---

<Section id="pricing-section" relative="relative">
	<Container width="w-full" margin="mx-auto mb-20">
		<SectionTitle
			margin="mb-10"
			weight="font-semibold"
			color="text-primary-dark/90"
			extraClass="pricing-card-title"
		>
			{data.title}
		</SectionTitle>
		<Grid extraClass="pricing-grid" width="w-full">
			<GridRow
				columns={3}
				gap="gap-x-12 xl:gap-x-0 gap-y-2"
				width="w-full"
				align="items-center"
				margin="mb-20"
			>
				{
					// Map through the tiers data to create GridCell for each tier
					data.tiers.map((tier) => (
						<GridCell>
							<Card
								href={tier.href}
								hover="hover:brightness-105 hover:scale-105"
								borderColor="border-primary hover:border-secondary"
								extraClass="pricing-card"
								client:visible
							>
								<SectionTitle
									size="text-2xl"
									margin="mt-4"
									color="text-primary-dark"
									weight="font-semibold"
									extraClass="pricing-card-title"
								>
									{tier.title}
								</SectionTitle>
								<SectionSubtitle
									color="text-primary"
									size="text-md"
									extraClass="pricing-card-subtitle"
								>
									{tier.description}
								</SectionSubtitle>
								<SectionSubtitle
									color="text-secondary"
									size="text-xl"
									weight="font-normal"
									extraClass=""
								>
									{tier.price.amount}
									<span class="text-sm font-thin">{tier.price.period}</span>
								</SectionSubtitle>
								<BulletWrapper>
									{tier.features.map((feature) => (
										<Bullet
											icon={"CheckIcon" as IconType}
											extraClass="pricing-card-text"
										>
											{feature}
										</Bullet>
									))}
								</BulletWrapper>
								<div class="pricing-card-cta">{tier.cta}</div>
							</Card>
						</GridCell>
					))
				}
			</GridRow>
		</Grid>
	</Container>
</Section>
